angular.module("horseRaceApp",["ui.bootstrap"]),angular.module("horseRaceApp").factory("random",function(){return{next:function(e,n){return randomNumber=Math.floor(Math.random()*(n-e+1))+e}}}),function(){var e=angular.module("horseRaceApp"),n=function(e,n,o){e.addHorse=function(n){n&&(e.horses.push(new function(n){var t="";return n&&(t=n),{name:t,isWinner:!1,position:0,run:function(){var n=o.next(e.minRandom,e.maxRandom);this.position+n>=e.maxValue?(this.position=e.maxValue,this.isWinner=!0):this.position+=n},resetHorse:function(){this.position=0,this.isWinner=!1},contestantType:function(){return 1==this.isWinner?"success":null}}}(n)),e.horseName="")},e.raceInProggress=!1;e.timeoutWatcher=void 0;var t=function(){for(var o=[],r=0;r<e.horses.length;r++)e.horses[r].run(),e.horses[r].position>=e.maxValue&&(e.horses[r].isWinner=!0,o.push(e.horses[r]));0!=o.length&&angular.isDefined(e.timeoutWatcher)?(n.cancel(e.timeoutWatcher),e.timeoutWatcher=void 0,e.raceInProgress=!1):e.timeoutWatcher=n(t,e.timeoutInterval)};e.startRace=function(){e.raceInProgress=!0,angular.isDefined(e.timeoutWatcher)||0==e.horses.length||(!function(){for(var n=!1,o=0;o<e.horses.length;o++)0!=e.horses[o].position&&(e.horses[o].resetHorse(),n=!0);return n}()?e.timeoutWatcher=n(t,e.timeoutInterval):n(e.startRace,1e3))},e.resetHorses=function(){e.horses=[]},e.minRandom=1,e.maxRandom=15,e.timeoutInterval=200,e.maxValue=500,e.horses=[]};n.$inject=["$scope","$timeout","random"],e.controller("horseController",n)}();